# 🌍 IoT 스마트 쓰레기통 프로젝트

## 💡 프로젝트 개요
이 프로젝트는 ESP32와 AWS IoT를 활용하여 스마트 쓰레기통의 상태를 실시간으로 모니터링하고 관리하는 시스템입니다.

### 주요 기능
- 🚒 초음파 센서를 사용한 쓰레기통 채움 상태 확인
- 🔦 화염 감지 센서를 통한 화재 감지
- 🔄 Deep Sleep 모드를 이용한 전력 효율화
- 📶 AWS IoT에 데이터 전송 및 상태 모니터링
- 🔋 배터리 상태 모니터링 및 출력

---

## 🛠️ 하드웨어 구성
1. **ESP32**
2. **초음파 센서 2개 (Trig, Echo 핀 사용)**
3. **화염 감지 센서 (GPIO34)**
4. **배터리 전압 측정을 위한 저항 분배 회로**
5. **LED (상태 표시)**

---

## 📚 소프트웨어 요구사항
### 🌐 라이브러리
- `WiFi.h`: Wi-Fi 연결
- `esp_sleep.h`: Deep Sleep 제어
- `AWS_IOT.h`: AWS IoT 연결
- `Arduino_JSON.h`: JSON 데이터 처리
- `driver/rtc_io.h`: RTC 핀 제어

### 📝 주요 코드 설명
1. **Wi-Fi 연결**
   - `ssid`와 `password`를 설정하여 Wi-Fi에 연결합니다.
   - 연결 실패 시 ESP32가 재부팅됩니다.

2. **AWS IoT 통신**
   - AWS IoT Core와 연결하여 데이터를 송신 및 수신합니다.
   - MQTT 프로토콜을 사용하며 `subscribe` 및 `publish` 토픽을 지정합니다.

3. **Deep Sleep 모드**
   - Deep Sleep을 활용하여 10분 간격으로 시스템을 작동시킵니다.
   - GPIO34 핀을 통해 외부 인터럽트 발생 시 시스템이 깨어납니다.

4. **센서 데이터 처리**
   - 초음파 센서를 통해 쓰레기통 채움 상태를 계산합니다.
   - 화염 감지 센서와 배터리 전압을 모니터링합니다.

5. **AWS 데이터 전송**
   - `send_data_aws()` 함수에서 초음파, 화염 감지, 배터리 정보를 JSON 형식으로 AWS IoT에 전송합니다.

---

## 👩‍💻 사용 방법
1. **ESP32 코드 업로드**
   - Arduino IDE 또는 PlatformIO를 사용하여 코드를 업로드합니다.
   - 필요한 라이브러리를 사전에 설치하세요.

2. **Wi-Fi 정보 입력**
   - `ssid`와 `password`를 수정하여 사용자의 Wi-Fi 네트워크 정보를 입력하세요.

3. **AWS IoT 설정**
   - AWS IoT 콘솔에서 Thing, 정책, 인증서를 생성하고, 코드를 수정하여 적용하세요.

4. **운영**
   - 시스템을 실행하면 센서 데이터를 수집하여 AWS에 업로드합니다.
   - 상태 LED 및 시리얼 출력으로 디버깅 정보를 확인할 수 있습니다.

---

## 🌐 JSON 데이터 예시
```json
{
  "state": {
    "reported": {
      "name": "ThrashModule1",
      "mainUltrasonicSensor": 25,
      "subUltrasonicSensor": 15,
      "detectFlame": 0,
      "battery": "85"
    }
  }
}
```

---

## 🎓 학습 목표
이 프로젝트를 통해 다음을 학습할 수 있습니다:
- IoT 기기와 클라우드 서비스의 통합
- 센서 데이터 처리 및 전송
- Deep Sleep 모드 활용 및 전력 관리
- AWS IoT Core와의 통신

---

## 🎁 기여하기
이 레포지토리는 오픈소스로 운영되며, 누구나 기여할 수 있습니다. 버그 제보, 새로운 기능 요청 및 코드 기여를 환영합니다!

1. **Issue 생성**: 문제가 있거나 개선 사항이 있다면 Issue를 생성해주세요.
2. **PR 요청**: 코드를 수정하거나 추가한 뒤 PR을 보내주세요.

---

## 🏆 라이선스
이 프로젝트는 MIT 라이선스 하에 배포됩니다.

